(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["musicdetail"],{"4de4":function(t,s,i){"use strict";var e=i("23e7"),a=i("b727").filter,o=i("1dde"),n=i("ae40"),r=o("filter"),l=n("filter");e({target:"Array",proto:!0,forced:!r||!l},{filter:function(t){return a(this,t,arguments.length>1?arguments[1]:void 0)}})},"575d":function(t,s,i){},6274:function(t,s,i){"use strict";var e=i("575d"),a=i.n(e);a.a},"7db0":function(t,s,i){"use strict";var e=i("23e7"),a=i("b727").find,o=i("44d2"),n=i("ae40"),r="find",l=!0,c=n(r);r in[]&&Array(1)[r]((function(){l=!1})),e({target:"Array",proto:!0,forced:l||!c},{find:function(t){return a(this,t,arguments.length>1?arguments[1]:void 0)}}),o(r)},"95ad":function(t,s,i){"use strict";i.r(s);var e=function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("div",{staticClass:"MusicDetail"},[t.isLoaded?i("div",{staticClass:"music-detail"},[i("p",{staticClass:"music-detail--header"},[i("router-link",{attrs:{to:"/music"}},[i("span",{attrs:{"uk-icon":"chevron-left"}}),t._v(" 楽曲一覧に戻る ")]),t._v(" 「音札」収録楽曲情報 ")],1),i("img",{staticClass:"music-detail--jacket",style:{borderColor:"rgba("+t.song.color.split(", ")[0]+", "+t.song.color.split(", ")[1]+", "+t.song.color.split(", ")[2]+", 0.75)"},attrs:{src:t.song.jacket.url+"?h=1080&w=1080",alt:t.song.name}}),i("div",{staticClass:"music-detail--name"},[t._v(t._s(t.song.name))]),i("div",{staticClass:"music-detail--artist"},[t._v(t._s(t.song.artist))]),t.song.character?i("div",{staticClass:"music-detail--character"},[t._v(" 担当キャラクター："+t._s(t.song.character)+" ")]):t._e(),t.song.youtube_music?i("div",[i("a",{staticClass:"music-detail--link-button",attrs:{href:t.song.youtube_music,target:"_blank",rel:"noopener noreferrer"}},[i("span",{attrs:{"uk-icon":"play-circle"}}),t._v(" 楽曲を試聴する "),i("div",[t._v("外部サイトに遷移します")])])]):t._e(),t.song.copyright?i("div",{staticClass:"music-detail--copyright"},[t._v(" "+t._s(t.song.copyright)+" ")]):t._e(),i("div",{staticClass:"divider"}),i("div",{staticClass:"music-detail--bpm"},[t._v("BPM: "+t._s(t.song.dispbpm))]),i("div",{staticClass:"music-detail--illustrator"},[t._v(" ILLUSTRATOR: "+t._s(t.song.illustrator)+" ")]),i("div",{directives:[{name:"show",rawName:"v-show",value:t.song.comment,expression:"song.comment"}],staticClass:"music-detail--comment"},[t._v(" "+t._s(t.song.comment)+" ")]),t.song.coming?i("div",{staticClass:"music-detail--coming"},[i("h3",[t._v("Coming Soon...")]),i("p",[t._v("この楽曲は準備中です。譜面詳細は実装までお待ちください。")])]):i("div",{staticClass:"music-detail--table"},[i("div",{staticClass:"music-detail--level -easy"},[i("h5",[t._v("LEVEL")]),i("strong",[t._v(t._s(t.song.easy))]),i("div",{staticClass:"music-detail--level--info"},[i("h4",[t._v("Notes Count")]),i("p",[t._v(t._s(t.song.easy_notes))]),i("h4",[t._v("Notes Designer")]),i("p",[t._v(t._s(t.song.easy_nd))]),t.song.easy_video?i("a",{staticClass:"music-detail--level--video",attrs:{href:t.song.easy_video,target:"_blank",rel:"noopener noreferrer"}},[i("span",{attrs:{"uk-icon":"youtube"}}),t._v(" 譜面紹介動画を見る ")]):t._e(),t.song.easy_chart?i("a",{staticClass:"music-detail--level--image",on:{click:function(s){t.selectedDifficulty="easy"}}},[i("span",{attrs:{"uk-icon":"album"}}),t._v(" 譜面画像を見る ")]):t._e()])]),i("div",{staticClass:"music-detail--level -normal"},[i("h5",[t._v("LEVEL")]),i("strong",[t._v(t._s(t.song.normal))]),i("div",{staticClass:"music-detail--level--info"},[i("h4",[t._v("Notes Count")]),i("p",[t._v(t._s(t.song.normal_notes))]),i("h4",[t._v("Notes Designer")]),i("p",[t._v(t._s(t.song.normal_nd))]),t.song.normal_video?i("a",{staticClass:"music-detail--level--video",attrs:{href:t.song.normal_video,target:"_blank",rel:"noopener noreferrer"}},[i("span",{attrs:{"uk-icon":"youtube"}}),t._v(" 譜面紹介動画を見る ")]):t._e(),t.song.normal_chart?i("a",{staticClass:"music-detail--level--image",on:{click:function(s){t.selectedDifficulty="normal"}}},[i("span",{attrs:{"uk-icon":"album"}}),t._v(" 譜面画像を見る ")]):t._e()])]),i("div",{staticClass:"music-detail--level -hard"},[i("h5",[t._v("LEVEL")]),i("strong",[t._v(t._s(t.song.hard))]),i("div",{staticClass:"music-detail--level--info"},[i("h4",[t._v("Notes Count")]),i("p",[t._v(t._s(t.song.hard_notes))]),i("h4",[t._v("Notes Designer")]),i("p",[t._v(t._s(t.song.hard_nd))]),t.song.hard_video?i("a",{staticClass:"music-detail--level--video",attrs:{href:t.song.hard_video,target:"_blank",rel:"noopener noreferrer"}},[i("span",{attrs:{"uk-icon":"youtube"}}),t._v(" 譜面紹介動画を見る ")]):t._e(),t.song.hard_chart?i("a",{staticClass:"music-detail--level--image",on:{click:function(s){t.selectedDifficulty="hard"}}},[i("span",{attrs:{"uk-icon":"album"}}),t._v(" 譜面画像を見る ")]):t._e()])])]),t.song.youtube_chart?i("div",[i("a",{staticClass:"music-detail--link-button",attrs:{href:t.song.youtube_chart,target:"_blank",rel:"noopener noreferrer"}},[i("span",{attrs:{"uk-icon":"youtube"}}),t._v(" 譜面攻略動画を見る "),i("div",[t._v("全難易度の譜面を比較できます")])])]):t._e(),i("div",[i("a",{staticClass:"music-detail--link-button -tweet",attrs:{href:t.tweetLink,target:"_blank",rel:"noopener noreferrer"}},[i("span",{attrs:{"uk-icon":"twitter"}}),t._v(" Twitterで共有 "),i("div",[t._v(t._s(t.song.name)+"をつぶやく")])])]),i("h3",[t._v("関連楽曲")]),t._l(t.relatedSongs,(function(s){return i("router-link",{key:s.id,staticClass:"music-detail--related",attrs:{to:{name:"MusicDetail",params:{id:s.song_id}}}},[i("img",{staticClass:"music-detail--related--jacket",style:{borderColor:"rgba("+s.color.split(", ")[0]+", "+s.color.split(", ")[1]+", "+s.color.split(", ")[2]+", 0.75)"},attrs:{src:s.jacket.url+"?h=150&w=150",alt:s.name}}),i("div",{staticClass:"music-detail--related--info"},[i("h5",[t._v(t._s(s.name))]),t._v(" "+t._s(s.artist)+" ")])])})),0===t.relatedSongs.length?i("p",[t._v("関連楽曲が見つかりません")]):t._e()],2):t.error?i("div",[i("h1",[t._v("エラー")]),i("p",[t._v(t._s(t.error))]),i("p",[i("router-link",{attrs:{to:"/music"}},[t._v("楽曲一覧に戻る")])],1)]):i("div",[i("div",{attrs:{"uk-spinner":"ratio: 6"}})]),i("ChartImage",{attrs:{song:t.song,difficulty:t.selectedDifficulty},on:{"close-image":t.closeImage}})],1)},a=[],o=(i("4de4"),i("7db0"),i("a15b"),i("b0c0"),i("2909")),n=i("bc3a"),r=i.n(n),l=function(){var t=this,s=t.$createElement,i=t._self._c||s;return t.song&&t.difficulty?i("div",{staticClass:"chart-image uk-animation-slide-bottom-small"},[i("div",{staticClass:"chart-image--header"},[i("div",{staticClass:"chart-image--header--title"},[i("span",{staticClass:"chart-image--header--difficulty",class:"-"+t.difficulty},[t._v(" LEVEL "+t._s(t.song[t.difficulty])+" ")]),i("strong",[t._v(t._s(t.song.name))])]),i("button",{attrs:{type:"button","uk-close":""},on:{click:t.onClose}})]),i("div",{ref:"container",staticClass:"chart-image--container"},[i("img",{style:{width:t.imageWidth+"px"},attrs:{src:t.imageUrl,alt:t.song.name}})]),i("div",{staticClass:"chart-image--footer"},[i("a",{staticClass:"uk-icon-button",attrs:{"uk-icon":"arrow-down"},on:{click:t.scrollToBottom}}),i("p",{staticClass:"chart-image--footer--detail"},[t._v(" "+t._s(this.song.bpm)+" BPM ｜ "+t._s(this.song[this.difficulty+"_notes"])+" Notes "),i("span",{staticClass:"chart-image--footer--copyright"},[t._v(" © 音札プロジェクト ")])]),i("a",{staticClass:"uk-icon-button",attrs:{"uk-icon":t.isSmall?"plus":"minus"},on:{click:function(s){t.isSmall=!t.isSmall}}})])]):t._e()},c=[],u={name:"ChartImage",props:{song:{type:Object,required:!1,default:null},difficulty:{type:String,required:!1,default:null}},data:function(){return{isSmall:!1}},computed:{imageUrl:function(){return this.song["".concat(this.difficulty,"_chart")].url},imageWidth:function(){var t=this.song["".concat(this.difficulty,"_chart")].width;return this.isSmall?t/2:t}},methods:{onClose:function(){this.$emit("close-image")},scrollToBottom:function(){if(this.imageUrl){var t=this.song["".concat(this.difficulty,"_chart")].height-this.$refs.container.offsetHeight;this.$refs.container.scrollTo({top:t,behavior:"smooth"})}}},watch:{difficulty:function(t){var s=this;t&&setTimeout((function(){s.scrollToBottom()}),250)},isSmall:function(t){var s=this.$refs.container;t?s.scrollTo({top:s.scrollTop/2,behavior:"instant"}):setTimeout((function(){s.scrollTo({top:2*s.scrollTop,behavior:"instant"})}),25)}}},d=u,g=(i("ee40"),i("2877")),f=Object(g["a"])(d,l,c,!1,null,"1fc08c47",null),m=f.exports,v={name:"MusicDetail",components:{ChartImage:m},data:function(){return{isLoaded:!1,error:null,apiKey:"91c69bf8-3df5-445f-81e7-30b54ab4a7d4",apiUrl:"https://otofuda.microcms.io/api/v1/songs",allSongs:[],song:null,selectedDifficulty:null}},mounted:function(){var t=this;r.a.get(this.apiUrl,{headers:{"X-MICROCMS-API-KEY":this.apiKey},params:{limit:1e3}}).then((function(s){t.allSongs=Object(o["a"])(s.data.contents).filter((function(t){return t.for_ac})),t.song=t.allSongs.find((function(s){return s.song_id===t.$route.params.id})),t.song?t.isLoaded=!0:t.error="楽曲が見つかりません。"}))},beforeRouteUpdate:function(t,s,i){this.song=this.allSongs.find((function(s){return s.song_id===t.params.id})),this.song||(this.error="楽曲が見つかりません。"),setTimeout((function(){window.scrollTo({top:0,behavior:"smooth"})}),20),i()},scrollBehavior:function(t,s,i){return i||{x:0,y:0}},computed:{relatedSongs:function(){var t=this;return this.song?this.allSongs.filter((function(s){return s.id!==t.song.id&&(s.artist===t.song.artist||s.illustrator===t.song.illustrator||s.character&&s.character===t.song.character)})):[]},pageTitle:function(){return this.error?"エラー｜音札 おとふだ":this.song?"".concat(this.song.name," - 楽曲情報｜音札 おとふだ"):"楽曲詳細情報｜音札 おとふだ"},tweetLink:function(){return["https://twitter.com/intent/tweet?text=",encodeURI(document.title),"%20",location.origin,"/~proj2019-13",this.$route.fullPath,"&related=otofuda&hashtags=音札"].join("")}},methods:{closeImage:function(){this.selectedDifficulty=null}},watch:{pageTitle:function(t){document.title=t}}},h=v,_=(i("6274"),Object(g["a"])(h,e,a,!1,null,null,null));s["default"]=_.exports},a15b:function(t,s,i){"use strict";var e=i("23e7"),a=i("44ad"),o=i("fc6a"),n=i("a640"),r=[].join,l=a!=Object,c=n("join",",");e({target:"Array",proto:!0,forced:l||!c},{join:function(t){return r.call(o(this),void 0===t?",":t)}})},a640:function(t,s,i){"use strict";var e=i("d039");t.exports=function(t,s){var i=[][t];return!!i&&e((function(){i.call(null,s||function(){throw 1},1)}))}},dcc5:function(t,s,i){},ee40:function(t,s,i){"use strict";var e=i("dcc5"),a=i.n(e);a.a}}]);
//# sourceMappingURL=musicdetail.b63daf67.js.map