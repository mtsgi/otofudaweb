(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["musicdetail"],{"4de4":function(t,s,e){"use strict";var i=e("23e7"),a=e("b727").filter,o=e("1dde"),n=e("ae40"),r=o("filter"),l=n("filter");i({target:"Array",proto:!0,forced:!r||!l},{filter:function(t){return a(this,t,arguments.length>1?arguments[1]:void 0)}})},"575d":function(t,s,e){},6274:function(t,s,e){"use strict";var i=e("575d"),a=e.n(i);a.a},"7db0":function(t,s,e){"use strict";var i=e("23e7"),a=e("b727").find,o=e("44d2"),n=e("ae40"),r="find",l=!0,c=n(r);r in[]&&Array(1)[r]((function(){l=!1})),i({target:"Array",proto:!0,forced:l||!c},{find:function(t){return a(this,t,arguments.length>1?arguments[1]:void 0)}}),o(r)},"95ad":function(t,s,e){"use strict";e.r(s);var i=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"MusicDetail"},[t.isLoaded?e("div",{staticClass:"music-detail"},[e("p",{staticClass:"music-detail--header"},[e("router-link",{attrs:{to:"/music"}},[e("span",{attrs:{"uk-icon":"chevron-left"}}),t._v(" 楽曲一覧に戻る ")]),t._v(" 「音札」収録楽曲情報 ")],1),e("img",{staticClass:"music-detail--jacket",style:{borderColor:"rgba("+t.song.color.split(", ")[0]+", "+t.song.color.split(", ")[1]+", "+t.song.color.split(", ")[2]+", 0.75)"},attrs:{src:t.song.jacket.url+"?h=1080&w=1080",alt:t.song.name}}),e("div",{staticClass:"music-detail--name"},[t._v(t._s(t.song.name))]),e("div",{staticClass:"music-detail--artist"},[t._v(t._s(t.song.artist))]),t.song.character?e("div",{staticClass:"music-detail--character"},[t._v(" 担当キャラクター："+t._s(t.song.character)+" ")]):t._e(),t.song.youtube_music?e("div",[e("a",{staticClass:"music-detail--link-button",attrs:{href:t.song.youtube_music,target:"_blank",rel:"noopener noreferrer"}},[e("span",{attrs:{"uk-icon":"play-circle"}}),t._v(" 楽曲を試聴する "),e("div",[t._v("外部サイトに遷移します")])])]):t._e(),t.song.copyright?e("div",{staticClass:"music-detail--copyright"},[t._v(" "+t._s(t.song.copyright)+" ")]):t._e(),e("div",{staticClass:"divider"}),e("div",{staticClass:"music-detail--bpm"},[t._v("BPM: "+t._s(t.song.dispbpm))]),e("div",{staticClass:"music-detail--illustrator"},[t._v(" ILLUSTRATOR: "+t._s(t.song.illustrator)+" ")]),e("div",{directives:[{name:"show",rawName:"v-show",value:t.song.comment,expression:"song.comment"}],staticClass:"music-detail--comment"},[t._v(" "+t._s(t.song.comment)+" ")]),t.song.coming?e("div",{staticClass:"music-detail--coming"},[e("h3",[t._v("Coming Soon...")]),e("p",[t._v("この楽曲は準備中です。譜面詳細は実装までお待ちください。")])]):e("div",{staticClass:"music-detail--table"},[e("div",{staticClass:"music-detail--level -easy",class:-1===t.song.easy?"-disabled":null},[e("h5",[t._v("LEVEL")]),e("strong",[t._v(t._s(-1===t.song.easy?"-":t.song.easy))]),e("div",{directives:[{name:"show",rawName:"v-show",value:-1!==t.song.easy,expression:"song.easy !== -1"}],staticClass:"music-detail--level--info"},[e("h4",[t._v("Notes Count")]),e("p",[t._v(t._s(t.song.easy_notes))]),e("h4",[t._v("Notes Designer")]),e("p",[t._v(t._s(t.song.easy_nd))]),t.song.easy_video?e("a",{staticClass:"music-detail--level--video",attrs:{href:t.song.easy_video,target:"_blank",rel:"noopener noreferrer"}},[e("span",{attrs:{"uk-icon":"youtube"}}),t._v(" 譜面紹介動画を見る ")]):t._e(),t.song.easy_chart?e("a",{staticClass:"music-detail--level--image",on:{click:function(s){t.selectedDifficulty="easy"}}},[e("span",{attrs:{"uk-icon":"album"}}),t._v(" 譜面画像を見る ")]):t._e()])]),e("div",{staticClass:"music-detail--level -normal",class:-1===t.song.normal?"-disabled":null},[e("h5",[t._v("LEVEL")]),e("strong",[t._v(t._s(-1===t.song.normal?"-":t.song.normal))]),e("div",{directives:[{name:"show",rawName:"v-show",value:-1!==t.song.normal,expression:"song.normal !== -1"}],staticClass:"music-detail--level--info"},[e("h4",[t._v("Notes Count")]),e("p",[t._v(t._s(t.song.normal_notes))]),e("h4",[t._v("Notes Designer")]),e("p",[t._v(t._s(t.song.normal_nd))]),t.song.normal_video?e("a",{staticClass:"music-detail--level--video",attrs:{href:t.song.normal_video,target:"_blank",rel:"noopener noreferrer"}},[e("span",{attrs:{"uk-icon":"youtube"}}),t._v(" 譜面紹介動画を見る ")]):t._e(),t.song.normal_chart?e("a",{staticClass:"music-detail--level--image",on:{click:function(s){t.selectedDifficulty="normal"}}},[e("span",{attrs:{"uk-icon":"album"}}),t._v(" 譜面画像を見る ")]):t._e()])]),e("div",{staticClass:"music-detail--level -hard",class:-1===t.song.hard?"-disabled":null},[e("h5",[t._v("LEVEL")]),e("strong",[t._v(t._s(-1===t.song.hard?"-":t.song.hard))]),e("div",{directives:[{name:"show",rawName:"v-show",value:-1!==t.song.hard,expression:"song.hard !== -1"}],staticClass:"music-detail--level--info"},[e("h4",[t._v("Notes Count")]),e("p",[t._v(t._s(t.song.hard_notes))]),e("h4",[t._v("Notes Designer")]),e("p",[t._v(t._s(t.song.hard_nd))]),t.song.hard_video?e("a",{staticClass:"music-detail--level--video",attrs:{href:t.song.hard_video,target:"_blank",rel:"noopener noreferrer"}},[e("span",{attrs:{"uk-icon":"youtube"}}),t._v(" 譜面紹介動画を見る ")]):t._e(),t.song.hard_chart?e("a",{staticClass:"music-detail--level--image",on:{click:function(s){t.selectedDifficulty="hard"}}},[e("span",{attrs:{"uk-icon":"album"}}),t._v(" 譜面画像を見る ")]):t._e()])])]),t.song.youtube_chart?e("div",[e("a",{staticClass:"music-detail--link-button",attrs:{href:t.song.youtube_chart,target:"_blank",rel:"noopener noreferrer"}},[e("span",{attrs:{"uk-icon":"youtube"}}),t._v(" 譜面攻略動画を見る "),e("div",[t._v("全難易度の譜面を比較できます")])])]):t._e(),e("div",[e("a",{staticClass:"music-detail--link-button -tweet",attrs:{href:t.tweetLink,target:"_blank",rel:"noopener noreferrer"}},[e("span",{attrs:{"uk-icon":"twitter"}}),t._v(" Twitterで共有 "),e("div",[t._v(t._s(t.song.name)+"をつぶやく")])])]),e("h3",[t._v("関連楽曲")]),t._l(t.relatedSongs,(function(s){return e("router-link",{key:s.id,staticClass:"music-detail--related",attrs:{to:{name:"MusicDetail",params:{id:s.song_id}}}},[e("img",{staticClass:"music-detail--related--jacket",style:{borderColor:"rgba("+s.color.split(", ")[0]+", "+s.color.split(", ")[1]+", "+s.color.split(", ")[2]+", 0.75)"},attrs:{src:s.jacket.url+"?h=150&w=150",alt:s.name}}),e("div",{staticClass:"music-detail--related--info"},[e("h5",[t._v(t._s(s.name))]),t._v(" "+t._s(s.artist)+" ")])])})),0===t.relatedSongs.length?e("p",[t._v("関連楽曲が見つかりません")]):t._e()],2):t.error?e("div",[e("h1",[t._v("エラー")]),e("p",[t._v(t._s(t.error))]),e("p",[e("router-link",{attrs:{to:"/music"}},[t._v("楽曲一覧に戻る")])],1)]):e("div",[e("div",{attrs:{"uk-spinner":"ratio: 6"}})]),e("ChartImage",{attrs:{song:t.song,difficulty:t.selectedDifficulty},on:{"close-image":t.closeImage}})],1)},a=[],o=(e("4de4"),e("7db0"),e("a15b"),e("b0c0"),e("2909")),n=e("bc3a"),r=e.n(n),l=function(){var t=this,s=t.$createElement,e=t._self._c||s;return t.song&&t.difficulty?e("div",{staticClass:"chart-image uk-animation-slide-bottom-small"},[e("div",{staticClass:"chart-image--header"},[e("div",{staticClass:"chart-image--header--title"},[e("span",{staticClass:"chart-image--header--difficulty",class:"-"+t.difficulty},[t._v(" LEVEL "+t._s(t.song[t.difficulty])+" ")]),e("strong",[t._v(t._s(t.song.name))])]),e("button",{attrs:{type:"button","uk-close":""},on:{click:t.onClose}})]),e("div",{ref:"container",staticClass:"chart-image--container"},[e("img",{style:{width:t.imageWidth+"px"},attrs:{src:t.imageUrl,alt:t.song.name}})]),e("div",{staticClass:"chart-image--footer"},[e("a",{staticClass:"uk-icon-button",attrs:{"uk-icon":"arrow-down"},on:{click:t.scrollToBottom}}),e("p",{staticClass:"chart-image--footer--detail"},[t._v(" "+t._s(this.song.bpm)+" BPM ｜ "+t._s(this.song[this.difficulty+"_notes"])+" Notes "),e("span",{staticClass:"chart-image--footer--copyright"},[t._v(" © 音札プロジェクト ")])]),e("a",{staticClass:"uk-icon-button",attrs:{"uk-icon":t.isSmall?"plus":"minus"},on:{click:function(s){t.isSmall=!t.isSmall}}})])]):t._e()},c=[],u={name:"ChartImage",props:{song:{type:Object,required:!1,default:null},difficulty:{type:String,required:!1,default:null}},data:function(){return{isSmall:!1}},computed:{imageUrl:function(){return this.song["".concat(this.difficulty,"_chart")].url},imageWidth:function(){var t=this.song["".concat(this.difficulty,"_chart")].width;return this.isSmall?t/2:t}},methods:{onClose:function(){this.$emit("close-image")},scrollToBottom:function(){if(this.imageUrl){var t=this.song["".concat(this.difficulty,"_chart")].height-this.$refs.container.offsetHeight;this.$refs.container.scrollTo({top:t,behavior:"smooth"})}}},watch:{difficulty:function(t){var s=this;t&&setTimeout((function(){s.scrollToBottom()}),250)},isSmall:function(t){var s=this.$refs.container;t?s.scrollTo({top:s.scrollTop/2,behavior:"instant"}):setTimeout((function(){s.scrollTo({top:2*s.scrollTop,behavior:"instant"})}),25)}}},d=u,g=(e("ee40"),e("2877")),m=Object(g["a"])(d,l,c,!1,null,"1fc08c47",null),v=m.exports,h={name:"MusicDetail",components:{ChartImage:v},data:function(){return{isLoaded:!1,error:null,apiKey:"91c69bf8-3df5-445f-81e7-30b54ab4a7d4",apiUrl:"https://otofuda.microcms.io/api/v1/songs",allSongs:[],song:null,selectedDifficulty:null}},mounted:function(){var t=this;r.a.get(this.apiUrl,{headers:{"X-MICROCMS-API-KEY":this.apiKey},params:{limit:1e3}}).then((function(s){t.allSongs=Object(o["a"])(s.data.contents).filter((function(t){return t.for_ac})),t.song=t.allSongs.find((function(s){return s.song_id===t.$route.params.id})),t.song?t.isLoaded=!0:t.error="楽曲が見つかりません。"}))},beforeRouteUpdate:function(t,s,e){this.song=this.allSongs.find((function(s){return s.song_id===t.params.id})),this.song||(this.error="楽曲が見つかりません。"),setTimeout((function(){window.scrollTo({top:0,behavior:"smooth"})}),20),e()},scrollBehavior:function(t,s,e){return e||{x:0,y:0}},computed:{relatedSongs:function(){var t=this;return this.song?this.allSongs.filter((function(s){return s.id!==t.song.id&&(s.artist===t.song.artist||s.illustrator===t.song.illustrator||s.character&&s.character===t.song.character)})):[]},pageTitle:function(){return this.error?"エラー｜音札 おとふだ":this.song?"".concat(this.song.name," - 楽曲情報｜音札 おとふだ"):"楽曲詳細情報｜音札 おとふだ"},tweetLink:function(){return["https://twitter.com/intent/tweet?text=",encodeURI(document.title),"%20",location.origin,"/~proj2019-13",this.$route.fullPath,"&related=otofuda&hashtags=音札"].join("")}},methods:{closeImage:function(){this.selectedDifficulty=null}},watch:{pageTitle:function(t){document.title=t}}},f=h,_=(e("6274"),Object(g["a"])(f,i,a,!1,null,null,null));s["default"]=_.exports},a15b:function(t,s,e){"use strict";var i=e("23e7"),a=e("44ad"),o=e("fc6a"),n=e("a640"),r=[].join,l=a!=Object,c=n("join",",");i({target:"Array",proto:!0,forced:l||!c},{join:function(t){return r.call(o(this),void 0===t?",":t)}})},a640:function(t,s,e){"use strict";var i=e("d039");t.exports=function(t,s){var e=[][t];return!!e&&i((function(){e.call(null,s||function(){throw 1},1)}))}},dcc5:function(t,s,e){},ee40:function(t,s,e){"use strict";var i=e("dcc5"),a=e.n(i);a.a}}]);
//# sourceMappingURL=musicdetail.239fd880.js.map